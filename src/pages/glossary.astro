---
import BaseLayout from '../layouts/BaseLayout.astro';

const title = "Glossary";
const description = "Definitions of key terms and concepts related to Vietnam's market landscape.";

const glossaryTerms = [
  {
    term: "VietQR",
    category: "Payments",
    definition: "A standardized QR code system for payments in Vietnam, enabling interoperability between banks and e-wallets for instant bank transfers.",
    relatedTopics: ["payments"]
  },
  {
    term: "NAPAS",
    category: "Infrastructure",
    definition: "National Payment Corporation of Vietnam. The national payment switch that handles interbank transfers, QR standardization, and ATM/POS switching.",
    relatedTopics: ["payments", "regulations"]
  },
  {
    term: "COD (Cash on Delivery)",
    category: "E-commerce",
    definition: "A payment method where customers pay in cash when receiving their order. Still widely used in Vietnam, especially in rural areas and for first-time online buyers.",
    relatedTopics: ["ecommerce", "payments"]
  },
  {
    term: "E-wallet",
    category: "Payments",
    definition: "Digital payment applications that store funds electronically. Major examples in Vietnam include Momo, ZaloPay, ViettelPay, and ShopeePay.",
    relatedTopics: ["payments"]
  },
  {
    term: "Super-app",
    category: "Platforms",
    definition: "A mobile application that integrates multiple servicesâ€”messaging, payments, ride-hailing, food delivery, and more. Grab and Zalo are leading examples in Vietnam.",
    relatedTopics: ["platforms", "payments"]
  },
  {
    term: "BNPL (Buy Now Pay Later)",
    category: "Payments",
    definition: "A short-term financing option allowing consumers to purchase items and pay in installments, often interest-free. Growing rapidly in Vietnam's e-commerce sector.",
    relatedTopics: ["payments", "ecommerce", "consumers"]
  },
  {
    term: "SBV (State Bank of Vietnam)",
    category: "Regulations",
    definition: "The central bank of Vietnam responsible for monetary policy, banking regulation, and payment system oversight.",
    relatedTopics: ["regulations", "payments"]
  },
  {
    term: "CIC (Credit Information Center)",
    category: "Infrastructure",
    definition: "Vietnam's centralized credit bureau that maintains consumer and corporate credit histories, operated under the State Bank of Vietnam.",
    relatedTopics: ["regulations", "payments"]
  },
  {
    term: "MoMo",
    category: "Payments",
    definition: "Vietnam's largest e-wallet by user base, with approximately 30 million users. Known for its extensive agent network and rewards ecosystem.",
    relatedTopics: ["payments", "platforms"]
  },
  {
    term: "ZaloPay",
    category: "Payments",
    definition: "An e-wallet integrated with Zalo, Vietnam's most popular messaging app, enabling social payments and transfers.",
    relatedTopics: ["payments", "platforms"]
  },
  {
    term: "Last-mile Delivery",
    category: "Logistics",
    definition: "The final step of the delivery process where goods reach the end customer. A critical and challenging component of Vietnam's logistics network, especially in rural areas.",
    relatedTopics: ["logistics", "ecommerce"]
  },
  {
    term: "Cross-border E-commerce",
    category: "E-commerce",
    definition: "Online shopping that involves purchasing from foreign sellers. Vietnamese consumers actively buy from platforms like Shopee, Lazada, and international sites.",
    relatedTopics: ["ecommerce", "payments", "regulations"]
  },
  {
    term: "Decree 52/2013/ND-CP",
    category: "Regulations",
    definition: "The foundational legal framework governing e-commerce activities in Vietnam, including consumer protection, information disclosure, and payment requirements.",
    relatedTopics: ["regulations", "ecommerce"]
  },
  {
    term: "Circular 19/2016/TT-NHNN",
    category: "Regulations",
    definition: "A State Bank of Vietnam circular regulating intermediary payment services, including e-wallets and payment gateways.",
    relatedTopics: ["regulations", "payments"]
  },
  {
    term: "Gen Z / Gen Y",
    category: "Consumers",
    definition: "Generational demographics driving Vietnam's digital economy. Gen Z (born 1997-2012) and Gen Y/Millennials (born 1981-1996) comprise the majority of digital-first consumers.",
    relatedTopics: ["consumers", "ecommerce", "platforms"]
  },
  {
    term: "Agent Network",
    category: "Payments",
    definition: "A physical network of small shops and merchants that accept deposits and withdrawals for e-wallet services, crucial for financial inclusion in rural Vietnam.",
    relatedTopics: ["payments"]
  },
  {
    term: "Neobank",
    category: "Payments",
    definition: "Digital-only banks without physical branches. Examples in Vietnam include Timo, Cake by VPBank, and LiveBank, offering mobile-first banking experiences.",
    relatedTopics: ["payments"]
  },
  {
    term: "Grab",
    category: "Platforms",
    definition: "Southeast Asia's leading super-app, dominant in Vietnam for ride-hailing, food delivery, and financial services through its Moca wallet integration.",
    relatedTopics: ["platforms", "payments", "logistics"]
  },
  {
    term: "Shopee",
    category: "E-commerce",
    definition: "The leading e-commerce marketplace in Vietnam by traffic and GMV, owned by Sea Group (Singapore). Features integrated payment system ShopeePay.",
    relatedTopics: ["ecommerce", "payments", "platforms"]
  },
  {
    term: "Lazada",
    category: "E-commerce",
    definition: "Major e-commerce platform in Vietnam, owned by Alibaba Group. Known for LazMall (branded goods) and cross-border shopping features.",
    relatedTopics: ["ecommerce", "payments", "logistics"]
  },
  {
    term: "Tiki",
    category: "E-commerce",
    definition: "Vietnam-born e-commerce platform, originally focused on books, now expanded to general merchandise. Known for TikiNow fast delivery service.",
    relatedTopics: ["ecommerce", "logistics"]
  },
  {
    term: "VNPay",
    category: "Payments",
    definition: "A major payment service provider in Vietnam offering QR code solutions, payment gateways, and banking app integrations.",
    relatedTopics: ["payments"]
  },
  {
    term: "ViettelPay",
    category: "Payments",
    definition: "E-wallet backed by state-owned Viettel Group (Vietnam's largest telecom), with strong presence in rural and remote areas leveraging Viettel's network.",
    relatedTopics: ["payments", "platforms"]
  },
  {
    term: "Moca",
    category: "Payments",
    definition: "E-wallet integrated with Grab's super-app in Vietnam, focused on transportation, food delivery, and lifestyle payments.",
    relatedTopics: ["payments", "platforms", "logistics"]
  }
];

// Group terms by first letter for alphabetical navigation
const groupedTerms = glossaryTerms.reduce((acc, term) => {
  const firstLetter = term.term[0].toUpperCase();
  if (!acc[firstLetter]) acc[firstLetter] = [];
  acc[firstLetter].push(term);
  return acc;
}, {} as Record<string, typeof glossaryTerms>);

const letters = Object.keys(groupedTerms).sort();
---

<BaseLayout title={title} description={description}>
  <article class="glossary-page">
    <header class="glossary-header">
      <h1>{title}</h1>
      <p class="glossary-intro">Definitions of key terms and concepts related to Vietnam's market landscape.</p>

      <!-- Alphabetical Navigation -->
      <nav class="glossary-nav" aria-label="Alphabetical navigation">
        {letters.map(letter => (
          <a href={`#section-${letter}`} class="glossary-nav__link">{letter}</a>
        ))}
      </nav>
    </header>

    <!-- Category Filter -->
    <div class="glossary-filters">
      <span class="glossary-filters__label">Filter by category:</span>
      <div class="glossary-filters__tags">
        <button type="button" class="filter-tag is-active" data-filter="all">All</button>
        {['Payments', 'E-commerce', 'Logistics', 'Platforms', 'Regulations', 'Infrastructure', 'Consumers'].map(cat => (
          <button type="button" class="filter-tag" data-filter={cat}>{cat}</button>
        ))}
      </div>
    </div>

    <!-- Glossary Content -->
    <div class="glossary-content">
      {letters.map(letter => (
        <section id={`section-${letter}`} class="glossary-section" data-letter={letter}>
          <h2 class="glossary-section__letter">{letter}</h2>
          <dl class="glossary-list">
            {groupedTerms[letter].map(term => (
              <div class="glossary-item" data-category={term.category}>
                <dt class="glossary-item__term">
                  {term.term}
                  <span class="glossary-item__category">{term.category}</span>
                </dt>
                <dd class="glossary-item__definition">
                  <p>{term.definition}</p>
                  {term.relatedTopics.length > 0 && (
                    <div class="glossary-item__related">
                      <span>Related:</span>
                      {term.relatedTopics.map((slug, i) => (
                        <>
                          <a href={`/${slug}`}>{slug.charAt(0).toUpperCase() + slug.slice(1)}</a>
                          {i < term.relatedTopics.length - 1 && <span>, </span>}
                        </>
                      ))}
                    </div>
                  )}
                </dd>
              </div>
            ))}
          </dl>
        </section>
      ))}
    </div>
  </article>

  <script>
    // Simple category filtering
    const filterButtons = document.querySelectorAll('.filter-tag');
    const glossaryItems = document.querySelectorAll('.glossary-item');

    filterButtons.forEach(button => {
      button.addEventListener('click', () => {
        const filter = button.dataset.filter;

        // Update active state
        filterButtons.forEach(btn => btn.classList.remove('is-active'));
        button.classList.add('is-active');

        // Filter items
        glossaryItems.forEach(item => {
          if (filter === 'all' || item.dataset.category === filter) {
            item.style.display = '';
          } else {
            item.style.display = 'none';
          }
        });

        // Hide/show sections based on visible items
        document.querySelectorAll('.glossary-section').forEach(section => {
          const visibleItems = section.querySelectorAll('.glossary-item:not([style*="display: none"])');
          section.style.display = visibleItems.length > 0 ? '' : 'none';
        });
      });
    });

    // Smooth scroll for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
      anchor.addEventListener('click', function (e) {
        e.preventDefault();
        const target = document.querySelector(this.getAttribute('href'));
        if (target) {
          target.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }
      });
    });
  </script>
</BaseLayout>
